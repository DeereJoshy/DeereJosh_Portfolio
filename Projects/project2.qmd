---
title: "Client Report - Missing Data and Late Flights"
subtitle: "Course DS 250"
author: "Josh Deere"
format:
  html:
    self-contained: true
    page-layout: full
    title-block-banner: true
    toc: true
    toc-depth: 3
    toc-location: body
    number-sections: false
    html-math-method: katex
    code-fold: true
    code-summary: "Show the code"
    code-overflow: wrap
    code-copy: hover
    code-tools:
        source: false
        toggle: true
        caption: See code
execute: 
  warning: false
    
---

```{python}
#| label: libraries
#| include: false
import pandas as pd
import numpy as np
import plotly.express as px
```


## Elevator pitch

_A SHORT (4-5 SENTENCES) PARAGRAPH THAT `DESCRIBES KEY INSIGHTS` TAKEN FROM METRICS IN THE PROJECT RESULTS THINK TOP OR MOST IMPORTANT RESULTS._

```{python}
flights = pd.read_json("https://raw.githubusercontent.com/byuidatascience/data4missing/master/data-raw/flights_missing/flights_missing.json")
```

__Questions and Tasks__

## QUESTION|TASK 1

__Fix all of the varied missing data types in the data to be consistent (all missing values should be displayed as “NaN”).__

_There were several months that were written as "n/a." To maintain data integrity, those needed to be replaced with month names. Airport names were missing but included the airport code which helped with filling in the blanks._

```{python}
#| label: Q1
#| code-summary: Read and format data

flights.month.replace(['NaN','n/a'],np.nan,inplace = True)
flights.month.replace('Febuary','February',inplace= True)
flights.num_of_delays_late_aircraft.replace(-999,np.nan,inplace = True)
flights.num_of_delays_carrier.replace('1500+',1500,inplace= True)
flights.airport_name.replace('','Washington, DC: Washington Dulles International',inplace= True)

# forward fill the months 

flights["month"] = flights["month"].ffill()

flights
```

## QUESTION|TASK 2

__Which airport has the worst delays?__

_The best way to determine delays is using categories which are directly involved with the aiport itself. This is between the security checkpoints and the carrier._

```{python}
#| label: Security


# choose which columns to use for your metric 
# Security and carrier delays
# I want to display percentage from the chosen columns in a table 
security = flights.query('num_of_delays_security')
sec_sum = flights.num_of_delays_security.sum()
flights['sec_delays_percent'] = flights['num_of_delays_security'] / sec_sum
print(flights)
px.bar(flights,x='airport_code',y= 'sec_delays_percent',color= 'airport_code')
# By airport code

# airport code - columns used for calculations - percentage
# plot this table 




```


```{python}
#| label: Carrier 

```





## QUESTION|TASK 3

__What is the best month to fly if you want to avoid delays of any length?__

_type your results and analysis here_

```{python}
#| label: Q3
#| code-summary: Read and format data
# Include and execute your code here

# chose your metric then create a plot 
# your analysis should include why you chose this metric and 
# from the plot explain what is being displayed - use refernce annotation
px.bar(flights, x= 'month', y= 'num_of_delays_total', color= 'airport_code', title= "Hopefully Your Plane Doesn't FALL Out of The Sky")


```

## QUESTION|TASK 4

__"...create a new column that calculates the total number of flights delayed by weather (both severe and mild)"__

